# GitHub Copilot 開発指示書

## 📋 プロジェクト概要
このプロジェクトは、スタートアップ・SaaS企業向けのNext.jsテンプレートを基に構築された**多言語対応Webアプリケーション**です。将来的にはデータベース連携、認証システム、課金システムを含む本格的なWebAppに発展させる予定です。

## 🛠 技術スタック
- **Next.js 15.3.0** (App Router)
- **TypeScript 5.3.3**
- **Tailwind CSS 4.1.3**
- **next-intl 4.1.0** (国際化)
- **next-themes 0.2.1** (テーマ)

## 🌐 国際化対応
### サポート言語
- 日本語 (ja) - デフォルト
- 英語 (en)
- 繁体中国語 (zh-TW)
- 簡体中国語 (zh-CN)

### 多言語対応の実装パターン
```tsx
// サーバーコンポーネント
import { getTranslations } from 'next-intl/server';

const ServerComponent = async ({ params }: { params: { locale: string } }) => {
  const t = await getTranslations('PageName');
  return <h1>{t('title')}</h1>;
};

// クライアントコンポーネント
"use client";
import { useTranslations } from 'next-intl';

const ClientComponent = () => {
  const t = useTranslations('PageName');
  return <h1>{t('title')}</h1>;
};
```

## 🎨 スタイリング指針
### Tailwind CSS使用パターン
```tsx
// レスポンシブデザイン
<div className="container mx-auto px-4 lg:px-8">
  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

// ダークモード対応
<div className="bg-white dark:bg-dark text-black dark:text-white">

// カスタムカラー使用
<button className="bg-primary text-white hover:bg-primary/90">
```

### コンポーネント設計原則
- **再利用可能性**: 共通コンポーネントは `Common/` フォルダに配置
- **責任分離**: UI・ロジック・データ取得を分離
- **型安全性**: 全ての props に TypeScript 型定義

## 📁 ディレクトリ構造規則
```
src/app/[locale]/
├── components/
│   ├── Header/          # ヘッダー関連
│   ├── Common/          # 再利用可能コンポーネント
│   ├── [FeatureName]/   # 機能別コンポーネント
└── [page-name]/         # ページディレクトリ
    └── page.tsx         # ページコンポーネント
```

## 🔧 開発ガイドライン

### 新しいページを作成する際の手順
1. **ページディレクトリ作成**: `src/app/[locale]/[page-name]/`
2. **page.tsx実装**:
```tsx
import { getTranslations, setRequestLocale } from "next-intl/server";
import { Metadata } from "next";

type Props = {
  params: Promise<{ locale: string }>;
};

export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: "PageName" });
  return {
    title: t("title"),
    description: t("description"),
  };
}

const PageName = async ({ params }: Props) => {
  const { locale } = await params;
  setRequestLocale(locale);
  const t = await getTranslations("PageName");

  return (
    <section className="overflow-hidden pt-[180px] pb-[120px]">
      <div className="container">
        <h1>{t("title")}</h1>
      </div>
    </section>
  );
};

export default PageName;
```
3. **翻訳ファイル更新**: 各言語の `messages/*.json` に翻訳追加
4. **ナビゲーション更新**: 必要に応じて `menuData.tsx` を更新

### 新しいコンポーネントを作成する際
1. **TypeScript型定義**: props の型を明確に定義
2. **多言語対応**: 表示テキストは翻訳ファイルから取得
3. **レスポンシブ**: モバイルファーストでデザイン
4. **アクセシビリティ**: alt属性、aria-label等を適切に設定

### API実装時の注意点（将来実装）
```tsx
// src/app/api/[endpoint]/route.ts
import { NextRequest, NextResponse } from 'next/server';

export async function GET(request: NextRequest) {
  try {
    // ロジック実装
    return NextResponse.json({ data: result });
  } catch (error) {
    return NextResponse.json(
      { error: 'Internal Server Error' },
      { status: 500 }
    );
  }
}
```

## 🔮 将来実装予定機能の考慮事項

### データベース統合準備
- **Prisma** 使用予定 → モデル定義を意識した型設計
- **Supabase** 統合予定 → 認証・リアルタイム機能対応

### 認証システム統合準備
- **NextAuth.js** 使用予定 → セッション管理の準備
- **ロールベース認証** 対応 → 権限チェック機能の設計

### 課金システム統合準備
- **Stripe** 使用予定 → 価格表示・プラン管理の準備
- **サブスクリプション** 対応 → ユーザー状態管理

## 🎯 コード品質基準
- **ESLint**: 必ず警告・エラーを解決
- **TypeScript**: `any` 型の使用禁止
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **パフォーマンス**: Core Web Vitals最適化

## 📝 コミット規則
```
feat: 新機能追加
fix: バグ修正
docs: ドキュメント更新
style: コードスタイル修正
refactor: リファクタリング
test: テスト追加・修正
chore: その他の作業
```

## 🚨 重要な実装ルール
1. **全てのテキスト**は翻訳ファイルから取得
2. **画像最適化**は Next.js Image コンポーネント使用
3. **クライアントコンポーネント**は必要最小限に限定
4. **レスポンシブデザイン**は必須
5. **ダークモード対応**は必須
6. **TypeScript型エラー**は許可しない
7. **コンソールエラー**は許可しない

## 🔄 開発ワークフロー
1. **feature/機能名** でブランチ作成
2. **ローカル開発**で動作確認
3. **型チェック**: `npm run type-check` (追加予定)
4. **リント**: `npm run lint`
5. **ビルド確認**: `npm run build`
6. **テスト実行**: `npm run test` (追加予定)
7. **コミット**: 規則に従ったメッセージ
8. **プルリクエスト**作成

## 💡 開発時のベストプラクティス
- **段階的実装**: 小さな単位でコミット
- **再利用性**: 似た機能は共通化
- **パフォーマンス**: 不要な再レンダリング防止
- **SEO**: メタタグ・構造化データ考慮
- **ユーザビリティ**: 直感的なUI/UX設計

## 📊 Server Component vs Client Component 選択指針

### 🖥️ Server Component を選ぶべき場合 (推奨)
- **静的コンテンツ表示**: テキスト、画像、リスト等
- **SEO重要**: メタデータ、構造化データが必要
- **初期レンダリング重視**: LCP、FCP最適化が必要
- **データフェッチ**: API呼び出し、DB クエリが必要
- **多言語対応**: サーバー側翻訳が必要

**例**: Hero, Features, About, Blog一覧, Testimonials

### 💻 Client Component にすべき場合 (最小限)
- **ユーザーインタラクション**: クリック、ホバー、スクロール
- **状態管理**: useState, useReducer が必要
- **ブラウザAPI**: localStorage, window オブジェクト使用
- **フォーム処理**: バリデーション、送信処理
- **動的UI**: モーダル、ドロップダウン、アニメーション

**例**: Header (スクロール検出), ThemeToggler, フォーム, モーダル

### ⚠️ 現在の改善推奨項目
```tsx
// ❌ 不要なClient Component
"use client";
const Footer = () => {
  // 静的コンテンツのみ → Server Component 推奨
};

// ✅ 適切なServer Component
const Footer = () => {
  // 静的リンク、コピーライト等
};
```

## 🔧 開発効率化のための追加機能

### 追加すべきnpmスクリプト
```json
{
  "scripts": {
    "type-check": "tsc --noEmit",
    "test": "jest",
    "test:watch": "jest --watch", 
    "test:e2e": "playwright test",
    "build:analyze": "ANALYZE=true npm run build",
    "preview": "npm run build && npm run start",
    "clean": "rm -rf .next out",
    "db:generate": "prisma generate",
    "db:push": "prisma db push",
    "db:studio": "prisma studio"
  }
}
```

### 追加すべき開発ツール
- **@types/node** - Node.js型定義
- **jest** + **@testing-library/react** - 単体テスト
- **playwright** - E2Eテスト  
- **@next/bundle-analyzer** - バンドルサイズ分析
- **eslint-plugin-jsx-a11y** - アクセシビリティ
- **prettier-plugin-organize-imports** - インポート整理

---
> この指示書に従って開発することで、一貫性のある高品質なコードを維持できます。疑問がある場合は、既存のコードパターンを参考にしてください。